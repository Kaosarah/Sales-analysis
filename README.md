# Sales analysis

### Introduction and Objectives

This is a sales dataset of a motor vehicle company containing sales, product and consumers' information. This analysis is to  generate various analytics 
and insights from customers' information and segmenting customers due to their purchase behavior, sales revenue generated by each product line and countries. 
This data set contain 25 columns and 2823 rows

### Data source

This data was scraped from the site below;
https://github.com/AllThingsDataWithAngelina/DataSource/blob/main/sales_data_sample.csv

### Data Cleaning and exploration

```
---Inspecting the data
----Whole dataset

SELECT * FROM [exp].[sales_data_sample$];
--Distinct Transaction status

SELECT DISTINCT [STATUS] Transactionstatus FROM [exp].[sales_data_sample$];

--- Real transaction (cancelled orders are excluded)
SELECT * FROM [exp].[sales_data_sample$]
WHERE STATUS != 'Cancelled';

--Distinct Dealsize

SELECT DISTINCT [DEALSIZE]  FROM [exp].[sales_data_sample$];

--Distint Product

SELECT DISTINCT [PRODUCTLINE] FROM [exp].[sales_data_sample$];  --(7 productline)

--Distinct number of customers

SELECT DISTINCT [CUSTOMERNAME] FROM [exp].[sales_data_sample$];  ---(92 customers)

--Distinct countries where customers are buying from

SELECT DISTINCT [COUNTRY] FROM [exp].[sales_data_sample$]        ---(19 countries)

---Each productline have varying prices, indication that there are different brands of cars 

SELECT DISTINCT 
[COUNTRY],
[PRICEEACH],
[PRODUCTLINE] 
FROM [exp].[sales_data_sample$]
where [PRODUCTLINE] ='Motorcycles';

--- Number of orders that were cancelled

 SELECT COUNT(*) FROM [exp].[sales_data_sample$]
 WHERE STATUS ='Cancelled'
```

### Data analysis 

```
----Total revenue (excluding transactions that are cancelled)

 SELECT FORMAT(ROUND(SUM([SALES]),2), 'C0') AS Total_revenue FROM [exp].[sales_data_sample$]
 WHERE [STATUS] != 'Cancelled';

--Total revenue IN 2003

 SELECT FORMAT(ROUND(SUM([SALES]),2), 'C0') AS Total_revenue FROM [exp].[sales_data_sample$]
 WHERE [STATUS] != 'Cancelled' AND
 [YEAR_ID] = 2003

--Total revenue IN 2004

 SELECT FORMAT(ROUND(SUM([SALES]),2), 'C0') AS Total_revenue FROM [exp].[sales_data_sample$]
 WHERE [STATUS] != 'Cancelled' AND
 [YEAR_ID] = 2004
  
  --Total revenue IN 2005

 SELECT FORMAT(ROUND(SUM([SALES]),2), 'C0') AS Total_revenue FROM [exp].[sales_data_sample$]
 WHERE [STATUS] != 'Cancelled' AND
 [YEAR_ID] = 2005
 
 ---- SALES BY PRODUCTLINE
 
SELECT  [PRODUCTLINE], ROUND (SUM([SALES]),0) AS Sales
FROM [exp].[sales_data_sample$]
WHERE [STATUS] != 'Cancelled'
GROUP BY [PRODUCTLINE]
ORDER BY Sales DESC;

--SALES BY DEALSIZE 
 
SELECT [DEALSIZE], FORMAT(ROUND(SUM([SALES]),0),'C') AS Sales
FROM [exp].[sales_data_sample$]
WHERE [STATUS] != 'Cancelled'
GROUP BY [DEALSIZE]
ORDER BY Sales DESC;

--SALES BY COUNTRY 

SELECT  [COUNTRY], SUM([SALES]) AS Sales
FROM [exp].[sales_data_sample$]
WHERE [STATUS] != 'Cancelled'
GROUP BY [COUNTRY]
ORDER BY Sales DESC;

---Customer's activeness (calculating the sales, number of orders made by each customers and their last purchase date )
(Recency-Frequency-Monetary)

WITH Pre_RFM AS (SELECT DISTINCT cus.*,
DATEDIFF(DD, cus.Lastpurchase_date,cus.Lastsales_date)  AS DayInterval
FROM
(SELECT [CUSTOMERNAME],
MAX([ORDERDATE]) AS Lastpurchase_date,
COUNT(*) AS No_of_orders,
SUM([SALES]) AS AmountSpent, 
(SELECT  MAX([ORDERDATE]) FROM [exp].[sales_data_sample$]) AS Lastsales_date
FROM [exp].[sales_data_sample$]
WHERE [STATUS] = 'Shipped'
GROUP BY [CUSTOMERNAME]
) AS cus
LEFT JOIN [exp].[sales_data_sample$] customer
ON cus.[CUSTOMERNAME]= customer.[CUSTOMERNAME])
SELECT *
INTO #r_f_m     
FROM Pre_RFM;

SELECT *
FROM  #r_f_m;

--- The result gotten was grouped into four segments according to the Orders made, Sales and Interval between customers' purchase
date and company's last transaction date

WITH Rfm AS (SELECT #r_f_m.*,
NTILE(4) OVER(ORDER BY No_of_orders) AS OrderRank,
NTILE(4) OVER(ORDER BY DayInterval ) AS Days_rank,
NTILE(4) OVER (ORDER BY AmountSpent) AS Amountrank
FROM #r_f_m)
SELECT *
INTO #rfm_u
FROM Rfm;

SELECT *
FROM #rfm_u;

WITH rfm_grade AS (SELECT #rfm_u.*,
CAST (OrderRank AS varchar) + CAST(Days_rank AS varchar) + CAST(AmountRank AS varchar) AS unit
FROM #rfm_u)

--- Segmenting customers according to their recency-monetary- frequency value.

SELECT r.CUSTOMERNAME, 
r.No_of_orders,
r.AmountSpent,
r.DayInterval,
CASE
WHEN r.unit IN (141,142,242) THEN 'Lost Customers'
WHEN unit IN (111,121,131,241,242,112)THEN 'Low value customers'
WHEN unit IN(221,222,223,342, 332,232,212,233,322,213,333,343,334,344,333,343,444)THEN 'Medium value customers'
WHEN unit IN(323,313,423,434) THEN 'High value customer'
WHEN unit IN(414,424) THEN 'Loyal/top customers' END Customer_status
FROM rfm_grade r;


---Product that are frequently bought together

WITH OrderNumber AS(SELECT [ORDERNUMBER], 
COUNT(*) Order_count 
FROM [exp].[sales_data_sample$]
WHERE [STATUS] ='Shipped'
GROUP BY [ORDERNUMBER])
SELECT *
INTO #Order
FROM OrderNumber
WHERE Order_count = 2;
SELECT *
FROM #Order;


select distinct OrderNumber, stuff((select ',' + PRODUCTLINE
	from[exp].[sales_data_sample$]  p
	where ORDERNUMBER in 
		(

			select ORDERNUMBER
			from (
				select ORDERNUMBER, count(*) rn
				FROM [exp].[sales_data_sample$]
				where STATUS = 'Shipped'
				group by ORDERNUMBER
			)m
			where rn = 2
		)
        and p.ORDERNUMBER =s.ORDERNUMBER
		for xml path ('')), 1, 1, '') Productbrand
        from [exp].[sales_data_sample$] s
        ORDER BY 2 DESC
   ```     

### Results

**TOTAL REVENUE**

![Screenshot (123)](https://user-images.githubusercontent.com/109418747/187935927-482e6dca-802a-493e-b5ea-dec386c1a86b.png)

**SALES BY PRODUCTLINE**


![Screenshot (124)](https://user-images.githubusercontent.com/109418747/187936529-bd9c71a7-7676-4125-9921-5efafc2591a0.png)


**SALES BY DEALSIZE**


![Screenshot (125)](https://user-images.githubusercontent.com/109418747/187936996-76ca9258-983e-40a0-877d-5be84aad19f3.png)



**SALES BY COUNTRY**


![Screenshot (126)](https://user-images.githubusercontent.com/109418747/187937954-b7cf0af7-5ce7-4b66-8085-a1abcada0bf1.png)

 
 **Two product mostly sold together**
 
 
![image](https://user-images.githubusercontent.com/109418747/187941748-09c3405a-01cc-4f0f-a441-d014b6b07c16.png)


**Customer's Segment**



![image](https://user-images.githubusercontent.com/109418747/188099492-928fd4fb-8a7d-4546-8190-797cc3b88365.png)


![image](https://user-images.githubusercontent.com/109418747/188100467-7627e3bf-7a9c-446d-a828-cf905ce26c56.png)


![image](https://user-images.githubusercontent.com/109418747/187944114-74528e96-36f0-4904-ac87-ab593216ba87.png)


![image](https://user-images.githubusercontent.com/109418747/188101072-4e95219e-2f87-4dce-b4f0-699224c8d9ff.png)


![image](https://user-images.githubusercontent.com/109418747/188088472-480d9bb1-2cee-4419-bc5f-7122b2184c2c.png)


### Findings and Recommendations

Total revenue generated was $9,838,141.

The best selling dealsize is the medium size (60.48% of total revenue) while the large size made lowest contribution of 13.24%.

Classic cars made the highest revenue for the company ($3,860,373) that is 39.2%, followed by Vintage cars and Motorcycle. Trains generated the least revenue of $221,161. Compaign and advertisement of other products should be prioritized to reduce reliance on classics cars as source of income.

The top three countries in terms of revenue generated are USA, Spain and France accordingly. Sales in Ireland is very poor as the company only generated 0.58% revenue.
Marketing and advertizing strategy should be improved in countries like Ireland, Belgium,Spain, Philippine,Switzerland and Sweden and also note reasons why there are no much sales in those regions.

Loyal and lost customers are 16.3%(15) of the total customers, low and high value customers are 15.22%(14) and Medium value customers are 36.96%(34) of all customers. 
The number of Loyal and high value customers are low and this might cause the company to lose more sales, the reasons why customers are lost should be know as 15 customers are lost out of 92. Low customers should be communicated to and given more care so that the company won't lose them. Product's values should be well explained to all customers.

Vintage cars and ships are product that are mostly bought together, these products should advert together since there is high possibility of buying them together.



 
